<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vibe Coding 2.0</title>
<style>
  body { margin:0; font-family: 'Arial', sans-serif; background: #1e1e1e; color: #eee; }
  .container { display:flex; flex-direction:column; height:100vh; }

  /* Horizontal editor + output */
  .editor-output { display:flex; flex:1; overflow:hidden; background:#2e2e2e; }
  .pane { flex:1; margin:5px; display:flex; flex-direction:column; }
  textarea { flex:1; width:100%; resize:none; background:#1e1e1e; color:#cfcfcf; border:none; padding:10px; font-family: monospace; font-size:16px; }
  iframe { flex:1; border:none; background:#fff; }
  .merge-btn { background:#444; color:#fff; border:none; padding:5px; cursor:pointer; margin-top:5px; }

  /* Timer */
  .timer-container { display:flex; justify-content:center; align-items:center; padding:10px; background:#111; }
  .timer { font-size:24px; font-weight:bold; background:#333; padding:10px 20px; border-radius:10px; color:#0f0; }

  /* Radio */
  .radio-container { display:flex; justify-content:center; padding:10px; background:#111; }
  audio { outline:none; }
</style>
</head>
<body>
<div class="container">
  <div class="editor-output" id="editorOutput">
    <div class="pane">
      <textarea id="code" placeholder="Напиши код здесь..."></textarea>
      <button class="merge-btn" onclick="toggleMerge('code')">Развернуть/Свернуть редактор</button>
    </div>
    <div class="pane">
      <iframe id="output"></iframe>
      <button class="merge-btn" onclick="toggleMerge('output')">Развернуть/Свернуть вывод</button>
    </div>
  </div>

  <div class="timer-container">
    <div class="timer" id="timer">25:00</div>
  </div>

  <div class="radio-container">
    <audio controls autoplay loop>
      <source src="https://icecast.lofi-radio.com/lofi.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>
</div>

<script>
// Компиляция/отображение кода
const codeArea = document.getElementById('code');
const outputFrame = document.getElementById('output');
codeArea.addEventListener('input', () => {
    const code = codeArea.value;
    outputFrame.srcdoc = code;
});

// Merge/expand
function toggleMerge(pane) {
    const editorOutput = document.getElementById('editorOutput');
    const panes = editorOutput.querySelectorAll('.pane');
    if (pane === 'code') {
        panes[0].style.flex = panes[0].style.flex === '1' ? '10' : '1';
        panes[1].style.flex = panes[0].style.flex === '10' ? '0' : '1';
    } else {
        panes[1].style.flex = panes[1].style.flex === '1' ? '10' : '1';
        panes[0].style.flex = panes[1].style.flex === '10' ? '0' : '1';
    }
}

// Таймер отдыха (пример: 25 минут)
let timerDuration = 25 * 60; // секунд
const timerEl = document.getElementById('timer');
function startTimer() {
    const interval = setInterval(() => {
        const minutes = Math.floor(timerDuration / 60).toString().padStart(2,'0');
        const seconds = (timerDuration % 60).toString().padStart(2,'0');
        timerEl.textContent = `${minutes}:${seconds}`;
        if(timerDuration <= 0){ clearInterval(interval); }
        timerDuration--;
    }, 1000);
}
startTimer();
</script>
</body>
</html>
